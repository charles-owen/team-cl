"use strict";(self.webpackChunkcse335=self.webpackChunkcse335||[]).push([[174],{91533:(t,e,n)=>{var i=n(34802),a={key:0},r={class:"cl-center"},o=["href"],s={class:"cl-team-member"},l=["id"],u=["innerHTML"],c=["innerHTML"],m={class:"cl-teamrater-radio"},d=["onUpdate:modelValue","id","value"],f=["for","innerHTML"],p={key:2},g=["onUpdate:modelValue"],h=["innerHTML"],v=function(t){return(0,i.dD)("data-v-29f1a3d2"),t=t(),(0,i.Cn)(),t}((function(){return(0,i._)("p",{class:"cl-center"},[(0,i._)("input",{type:"submit",value:"Submit"})],-1)})),b={key:2,class:"cl-center"};function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const _={props:["json"],data:function(){return{values:{},staff:!1,reportPath:""}},created:function(){if(console.log(this.json),void 0!==this.json.team){var t,e=y(this.json.team.members);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.values[n.memberid]={};var i,a=this.values[n.memberid],r=y(this.json.items);try{for(r.s();!(i=r.n()).done;){var o=i.value;a[o.tag]="comment"===o.type?"":null}}catch(t){r.e(t)}finally{r.f()}}}catch(t){e.e(t)}finally{e.f()}var s,l=y(this.json.ratings);try{for(l.s();!(s=l.n()).done;){var u=s.value,c=+u.rateeid;if(void 0!==this.values[c]){var m=u.metadata;for(var d in m)void 0!==this.values[c][d]&&(this.values[c][d]=m[d])}}}catch(t){l.e(t)}finally{l.f()}}},mounted:function(){this.staff=this.json.staff,this.reportPath=Site.root+"/cl/team/ratings/"+this.json.teaming},methods:{name:function(t,e,n){var i="cl-teamrater-"+t.memberid+"-"+e.tag;return void 0!==n&&(i+="-"+n.code),i},submit:function(t){var e,n=this,i=!1,a=y(this.json.team.members);try{for(a.s();!(e=a.n()).done;){var r,o=e.value,s=y(this.json.items);try{for(s.s();!(r=s.n()).done;){var l=r.value,u=document.getElementById(this.name(o,l));null===this.values[o.memberid][l.tag]?(i=!0,u.classList.add("cl-teamrater-missing")):u.classList.remove("cl-teamrater-missing")}}catch(t){s.e(t)}finally{s.f()}}}catch(t){a.e(t)}finally{a.f()}if(i)this.$site.toast(this,"You must complete all items to submit this form");else{var c={ratings:this.values};this.$site.api.post("/api/team/rate/"+this.json.assignment+"/"+this.json.team.id,c).then((function(t){t.hasError()?n.$site.toast(n,t):n.$site.toast(n,"Ratings successfully uploaded")})).catch((function(t){n.$site.toast(n,t)}))}}}};var k=n(43546),$=n.n(k),C=n(19104),M=n.n(C),A=n(85797),Z=n.n(A),T=n(74706),x=n.n(T),D=n(10807),S=n.n(D),E=n(37002),j=n.n(E),U=n(1916),z={};z.styleTagTransform=j(),z.setAttributes=x(),z.insert=Z().bind(null,"head"),z.domAPI=M(),z.insertStyleElement=S();$()(U.Z,z);U.Z&&U.Z.locals&&U.Z.locals;var H=n(17944);const I=(0,H.Z)(_,[["render",function(t,e,n,y,w,_){return(0,i.wg)(),(0,i.iD)("div",null,[t.staff?((0,i.wg)(),(0,i.iD)("div",a,[(0,i._)("p",r,[(0,i._)("a",{href:t.reportPath},"Team Participation Report for "+(0,i.zw)(n.json.teaming),9,o)])])):(0,i.kq)("v-if",!0),void 0!==n.json.team?((0,i.wg)(),(0,i.iD)("form",{key:1,onSubmit:e[0]||(e[0]=(0,i.iM)((function(){return _.submit&&_.submit.apply(_,arguments)}),["prevent"]))},[(0,i._)("h2",null,"Team "+(0,i.zw)(n.json.team.name),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.json.team.members,(function(e){return(0,i.wg)(),(0,i.iD)("div",s,[(0,i._)("h3",null,(0,i.zw)(e.name),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.json.items,(function(n){return(0,i.wg)(),(0,i.iD)("div",{class:"cl-teamrater-item",id:_.name(e,n)},[n.before.length>0?((0,i.wg)(),(0,i.iD)("div",{key:0,innerHTML:n.before},null,8,u)):(0,i.kq)("v-if",!0),(0,i._)("div",{innerHTML:n.text},null,8,c),"multiple-choice"===n.type?((0,i.wg)(!0),(0,i.iD)(i.HY,{key:1},(0,i.Ko)(n.choices,(function(a){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("p",m,[(0,i.wy)((0,i._)("input",{type:"radio","onUpdate:modelValue":function(i){return t.values[e.memberid][n.tag]=i},id:_.name(e,n,a),value:a.code},null,8,d),[[i.G2,t.values[e.memberid][n.tag]]]),(0,i._)("label",{for:_.name(e,n,a),innerHTML:a.text},null,8,f)])])})),256)):(0,i.kq)("v-if",!0),"comment"===n.type?((0,i.wg)(),(0,i.iD)("div",p,[(0,i.wy)((0,i._)("textarea",{class:"cl-team-comment","onUpdate:modelValue":function(i){return t.values[e.memberid][n.tag]=i}},null,8,g),[[i.nr,t.values[e.memberid][n.tag]]])])):(0,i.kq)("v-if",!0),n.after.length>0?((0,i.wg)(),(0,i.iD)("div",{key:3,innerHTML:n.after},null,8,h)):(0,i.kq)("v-if",!0)],8,l)})),256))])})),256)),v],32)):t.staff?(0,i.kq)("v-if",!0):((0,i.wg)(),(0,i.iD)("p",b,"You are not a member of a team"))])}],["__scopeId","data-v-29f1a3d2"]]);var N=function(t,e){var n=t.VueHelper,i=JSON.parse(e.textContent);e.innerHTML="",e.style.display="block";var a={"team-rater":I},r=n.createApp({site:t,data:function(){return{json:i}},template:'<div><team-rater :json="json"></team-rater></div>',components:a});r.config.globalProperties.$site=t,n.mount(r,e)},B=function(){};B.create=function(t){return t.ready((function(){var e;null!==(e=document.getElementById("cl-team-rater"))&&new N(t,e)})),!0};var O=n(40722),L={class:"content"},Y={key:0,class:"full"},K={key:0},V=(0,i._)("tr",null,[(0,i._)("th"),(0,i._)("th",null,"Tag"),(0,i._)("th",null,"Name"),(0,i._)("th",null,"Visibility")],-1),q=["onClick"],P=["src"],R=["onClick"],W=["src"],G=["onClick"],J=["src"],F={key:1,class:"center"},Q=[(0,i._)("p",null,"There are currently no defined teamings.",-1),(0,i._)("p",null,"Choose Add Teaming to add a new teaming.",-1)];var X=n(94975),tt=function t(e){void 0!==e?(this.id=e.id,this.tag=e.tag,this.name=e.name,this.public=e.public):(this.id=0,this.tag="",this.name="",this.public=!0),this.clone=function(){return new t(this)}},et={class:"cl-teaming-editor"},nt=(0,i._)("br",null,null,-1),it=(0,i._)("br",null,null,-1),at={class:"center"};const rt={props:["teaming"],mounted:function(){this.$refs.tag.focus()}};var ot=n(59446),st={};st.styleTagTransform=j(),st.setAttributes=x(),st.insert=Z().bind(null,"head"),st.domAPI=M(),st.insertStyleElement=S();$()(ot.Z,st);ot.Z&&ot.Z.locals&&ot.Z.locals;const lt=(0,H.Z)(rt,[["render",function(t,e,n,a,r,o){return(0,i.wg)(),(0,i.iD)("div",et,[(0,i._)("div",null,[(0,i._)("form",null,[(0,i._)("p",null,[(0,i._)("label",null,[(0,i.Uk)("Tag"),nt,(0,i.wy)((0,i._)("input",{ref:"tag",type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return n.teaming.tag=t})},null,512),[[i.nr,n.teaming.tag]])])]),(0,i._)("p",null,[(0,i._)("label",null,[(0,i.Uk)("Name"),it,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return n.teaming.name=t})},null,512),[[i.nr,n.teaming.name]])])]),(0,i._)("p",at,[(0,i._)("label",null,[(0,i.wy)((0,i._)("input",{type:"checkbox","onUpdate:modelValue":e[2]||(e[2]=function(t){return n.teaming.public=t})},null,512),[[i.e8,n.teaming.public]]),(0,i.Uk)(" Public")])])])])])}]]);function ut(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var mt=Site.ConsoleComponentBase,dt=Site.VueHelper;const ft={extends:mt,data:function(){return{teamings:null}},mounted:function(){var t=this;this.setTitle(": Teamings"),this.addNav2("Add Teaming",5,(function(){t.add()})),this.$site.api.get("/api/team/teamings",{}).then((function(e){e.hasError()?t.$site.toast(t,e):t.take(e)})).catch((function(e){t.$site.toast(t,e)}))},methods:{take:function(t){var e=t.getData("teamings").attributes;this.teamings=[];var n,i=ut(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.teamings.push(new tt(a))}}catch(t){i.e(t)}finally{i.f()}},add:function(){var t=this,e=new tt;new X.Z({title:"New Teaming",content:'<div id="cl-teaming"></div>',addClass:"cl-dialog-narrow",buttons:[{contents:"Add",focus:!0,click:function(n){if(t.$site.Tags.validate(e.tag))if(""!==e.name.trim()){var i={tag:e.tag.trim(),name:e.name.trim(),public:e.public};t.$site.api.post("/api/team/teamings/new",i).then((function(e){e.hasError()?t.$site.toast(t,e):(t.take(e),n.close())})).catch((function(e){t.$site.toast(t,e)}))}else new X.Z.MessageBox("Must enter name","You must provide a non-empty name",X.Z.MessageBox.OK)}},{contents:"Cancel",click:function(t){t.close()}}]}),dt.createApp({data:function(){return{teaming:e}},template:'<editor :teaming="teaming"></editor>',components:{editor:lt}}).mount("#cl-teaming")},editer:function(t){var e=this;t=t.clone(),new X.Z({title:"Edit Teaming",content:'<div id="cl-teaming"></div>',addClass:"cl-dialog-narrow",buttons:[{contents:"Update",focus:!0,click:function(n){if(e.$site.Tags.validate(t.tag))if(""!==t.name.trim()){var i={id:t.id,tag:t.tag.trim(),name:t.name.trim(),public:t.public};e.$site.api.post("/api/team/teamings/update",i).then((function(t){t.hasError()?e.$site.toast(e,t):(e.take(t),n.close())})).catch((function(t){e.$site.toast(e,t)}))}else new X.Z.MessageBox("Must enter name","You must provide a non-empty name",X.Z.MessageBox.OK)}},{contents:"Cancel",click:function(t){t.close()}}]}),dt.createApp({data:function(){return{teaming:t}},template:'<editor :teaming="teaming"></editor>',components:{editor:lt}}).mount("#cl-teaming")},deleter:function(t){var e=this;new X.Z.MessageBox("Are you sure?","Are you sure you want to delete "+t.name,X.Z.MessageBox.OKCANCEL,(function(){e.$site.api.post("/api/team/teamings/delete",{id:t.id}).then((function(t){t.hasError()?e.$site.toast(e,t):e.take(t)})).catch((function(t){e.$site.toast(e,t)}))}))},copier:function(t){var e=this,n=t.clone();n.name+="-copy",n.tag+="-copy",new X.Z({title:"Copy Teaming "+t.name,content:'<div id="cl-teaming"></div>',addClass:"cl-dialog-narrow",buttons:[{contents:"Copy",focus:!0,click:function(i){if(e.$site.Tags.validate(n.tag))if(""!==t.name.trim()){var a={orig:t.id,tag:n.tag.trim(),name:n.name.trim(),public:n.public};e.$site.api.post("/api/team/teamings/copy",a).then((function(t){t.hasError()?e.$site.toast(e,t):(e.take(t),i.close())})).catch((function(t){e.$site.toast(e,t)}))}else new X.Z.MessageBox("Must enter name","You must provide a non-empty name",X.Z.MessageBox.OK)}},{contents:"Cancel",click:function(t){t.close()}}]}),dt.createApp({data:function(){return{teaming:n}},template:'<editor :teaming="teaming"></editor>',components:{editor:lt}}).mount("#cl-teaming")}}},pt=(0,H.Z)(ft,[["render",function(t,e,n,a,r,o){var s=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)("div",L,[null!==t.teamings?((0,i.wg)(),(0,i.iD)("div",Y,[t.teamings.length>0?((0,i.wg)(),(0,i.iD)("table",K,[V,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.teamings,(function(e){return(0,i.wg)(),(0,i.iD)("tr",{key:e.id},[(0,i._)("td",null,[(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.editer(e)}),["prevent"])},[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/pencil16.png",alt:"Edit",title:"Edit"},null,8,P)],8,q),(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.copier(e)}),["prevent"])},[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/copy16.png",alt:"Copy",title:"Copy"},null,8,W)],8,R),(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.deleter(e)}),["prevent"])},[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/x.png",alt:"Delete",title:"Delete"},null,8,J)],8,G)]),(0,i._)("td",null,[(0,i.Wm)(s,{to:t.root+"/cl/console/team/"+e.id},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,i.zw)(e.tag),1)]})),_:2},1032,["to"])]),(0,i._)("td",null,(0,i.zw)(e.name),1),(0,i._)("td",null,(0,i.zw)(e.public?"Public":"Private"),1)])})),128))])):((0,i.wg)(),(0,i.iD)("div",F,Q))])):(0,i.kq)("v-if",!0)])}]]);var gt={class:"content"},ht={key:0,class:"full cl-teams-editor"},vt={class:"small"},bt={class:"cl-internal"},yt={class:"right"},wt={key:0},_t=["onClick"],kt=["src"],$t=["onClick"],Ct=["src"],Mt=["src"],At=["onClick"],Zt=["src"],Tt=["innerHTML"],xt={class:"center"},Dt={key:0},St=[(0,i._)("td",{colspan:"4",class:"center"},"*** empty ***",-1)],Et={class:"right"},jt=["src"],Ut=["onClick"],zt=["src"],Ht=["href"],It=(0,i._)("td",null,null,-1),Nt={class:"center"};var Bt=n(52195),Ot={class:"cl-center-in"},Lt=function(t){return(0,i.dD)("data-v-33225ecc"),t=t(),(0,i.Cn)(),t}((function(){return(0,i._)("br",null,null,-1)})),Yt={class:"cl-dialog-bottom"};var Kt=n(46149);const Vt={extends:Kt.Z,props:["team","teamingid","operation","parent"],mounted:function(){this.$refs.name.focus()},methods:{submit:function(){var t=this;if(""!==this.team.name.trim()){var e={id:this.team.id,name:this.team.name.trim()};this.$site.api.post("/api/team/teams/"+this.teamingid+"/"+this.operation,e).then((function(e){e.hasError()?t.$site.toast(t,e):(t.parent.take(e),t.$dialog.close())})).catch((function(e){t.$site.toast(t,e)}))}else new X.Z.MessageBox("Must enter name","You must provide a non-empty name",X.Z.MessageBox.OK)}}};var qt=n(75890),Pt={};Pt.styleTagTransform=j(),Pt.setAttributes=x(),Pt.insert=Z().bind(null,"head"),Pt.domAPI=M(),Pt.insertStyleElement=S();$()(qt.Z,Pt);qt.Z&&qt.Z.locals&&qt.Z.locals;const Rt=(0,H.Z)(Vt,[["render",function(t,e,n,a,r,o){return(0,i.wg)(),(0,i.iD)("div",Ot,[(0,i._)("form",{class:"cl-inline-padded",onSubmit:e[1]||(e[1]=(0,i.iM)((function(t){return o.submit()}),["prevent"]))},[(0,i._)("p",null,[(0,i._)("label",null,[(0,i.Uk)("Name"),Lt,(0,i.wy)((0,i._)("input",{ref:"name",type:"text","onUpdate:modelValue":e[0]||(e[0]=function(t){return n.team.name=t})},null,512),[[i.nr,n.team.name]])])])],32),(0,i._)("div",Yt,[(0,i._)("button",{onClick:e[2]||(e[2]=(0,i.iM)((function(t){return o.submit()}),["prevent"])),type:"submit"},(0,i.zw)("new"===n.operation?"Add":"Update"),1),(0,i._)("button",{onClick:e[3]||(e[3]=(0,i.iM)((function(e){return t.close()}),["prevent"])),type:"submit"},"Cancel")])])}],["__scopeId","data-v-33225ecc"]]);var Wt=function t(e){void 0!==e?(this.name=e.name,this.id=e.id,this.members=e.members):(this.name="",this.id=0,this.members=[]),this.clone=function(){return new t(this)}},Gt={class:"cl-center-in"},Jt=(0,i._)("br",null,null,-1),Ft={class:"cl-dialog-bottom"};const Qt={extends:Kt.Z,props:["teamingid","parent"],data:function(){return{size:5}},mounted:function(){this.$refs.size.select(),this.$refs.size.focus()},methods:{submit:function(){var t=this,e=+this.size;if(e<1||e>100)new X.Z.MessageBox("Must enter size","You must provide a size from 1 to 100",X.Z.MessageBox.OK);else{var n={size:e};this.$site.api.post("/api/team/teams/"+this.teamingid+"/distribute",n).then((function(e){e.hasError()?t.$site.toast(t,e):(t.parent.take(e),t.$dialog.close())})).catch((function(e){t.$site.toast(t,e)}))}}}},Xt=(0,H.Z)(Qt,[["render",function(t,e,n,a,r,o){return(0,i.wg)(),(0,i.iD)("div",Gt,[(0,i._)("form",{class:"cl-inline-padded",onSubmit:e[1]||(e[1]=(0,i.iM)((function(t){return o.submit()}),["prevent"]))},[(0,i._)("p",null,[(0,i._)("label",null,[(0,i.Uk)("Team Size"),Jt,(0,i.wy)((0,i._)("input",{style:{width:"8em"},class:"center",ref:"size",type:"text","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.size=e})},null,512),[[i.nr,t.size]])])])],32),(0,i._)("div",Ft,[(0,i._)("button",{onClick:e[2]||(e[2]=(0,i.iM)((function(t){return o.submit()}),["prevent"])),type:"submit"},"Distribute"),(0,i._)("button",{onClick:e[3]||(e[3]=(0,i.iM)((function(e){return t.close()}),["prevent"])),type:"submit"},"Cancel")])])}]]);var te=function(t){return(0,i.dD)("data-v-30029082"),t=t(),(0,i.Cn)(),t}((function(){return(0,i._)("br",null,null,-1)})),ee={class:"cl-dialog-bottom"};function ne(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const ae={extends:Kt.Z,props:["teamingid","parent"],data:function(){return{names:""}},mounted:function(){this.$refs.names.focus()},methods:{submit:function(){var t,e=this,n=[],i=ne(this.names.trim().split("\n"));try{for(i.s();!(t=i.n()).done;){var a=t.value;""!==(a=a.trim())&&n.push(a)}}catch(t){i.e(t)}finally{i.f()}if(0!==n.length){var r={names:n};this.$site.api.post("/api/team/teams/"+this.teamingid+"/names",r).then((function(t){t.hasError()?e.$site.toast(e,t):(e.parent.take(t),e.$dialog.close())})).catch((function(t){e.$site.toast(e,t)}))}else new X.Z.MessageBox("Must enter names","You must enter one or more names to use.",X.Z.MessageBox.OK)}}};var re=n(83896),oe={};oe.styleTagTransform=j(),oe.setAttributes=x(),oe.insert=Z().bind(null,"head"),oe.domAPI=M(),oe.insertStyleElement=S();$()(re.Z,oe);re.Z&&re.Z.locals&&re.Z.locals;const se=(0,H.Z)(ae,[["render",function(t,e,n,a,r,o){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("form",{class:"cl-inline-padded",onSubmit:e[1]||(e[1]=(0,i.iM)((function(t){return o.submit()}),["prevent"]))},[(0,i._)("p",null,[(0,i._)("label",null,[(0,i.Uk)("Team Names"),te,(0,i.wy)((0,i._)("textarea",{ref:"names","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.names=e}),rows:"15"},null,512),[[i.nr,t.names]])])])],32),(0,i._)("div",ee,[(0,i._)("button",{onClick:e[2]||(e[2]=(0,i.iM)((function(t){return o.submit()}),["prevent"])),type:"submit"},"Set Names"),(0,i._)("button",{onClick:e[3]||(e[3]=(0,i.iM)((function(e){return t.close()}),["prevent"])),type:"submit"},"Cancel")])])}],["__scopeId","data-v-30029082"]]);function le(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return ue(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ue(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return o=t.done,t},e:function(t){s=!0,r=t},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}const ce={extends:Site.ConsoleComponentBase,props:["id"],data:function(){return{teaming:null,teams:null,open:[]}},computed:{totals:function(){var t,e=0,n=0,i=le(this.teams);try{for(i.s();!(t=i.n()).done;){var a=t.value;null!==a.name?e+=a.members.length:n+=a.members.length}}catch(t){i.e(t)}finally{i.f()}var r=e+" team members / "+(this.teams.length-1)+" teams";return n>0&&(r+=" / "+n+" unassigned"),r}},components:{clMenu:Site.MenuVue},mounted:function(){var t=this;this.addNav2Link("Teamings",3,"/cl/console/teams"),this.addNav2("Add Team",5,(function(){t.add()})),this.addNav2("Load Names",6,(function(){t.loadNames()})),this.addNav2("Expand All",7,(function(){t.expandAll()})),this.addNav2("Export",8,(function(){t.export()})),this.$site.api.get("/api/team/teams/"+this.id,{}).then((function(e){e.hasError()?t.$site.toast(t,e):t.take(e)})).catch((function(e){t.$site.toast(t,e)}))},methods:{take:function(t){this.teaming=t.getData("teaming").attributes;var e=t.getData("teams").attributes;this.teams=[];var n,i=le(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;this.teams.push(new Wt(a))}}catch(t){i.e(t)}finally{i.f()}},toggle:function(t){!0===this.open[t.id]?this.open[t.id]=!1:this.open[t.id]=!0},add:function(){var t=new Wt,e=this.id;new Bt.i(this.$site,{title:"New Team",vue:Rt,data:function(){return{team:t,teamingid:e,operation:"new"}},buttons:!1,parent:this})},editer:function(t){t=t.clone();var e=this.id;new Bt.i(this.$site,{title:"Edit Team",vue:Rt,data:function(){return{team:t,teamingid:e,operation:"update"}},buttons:!1,parent:this})},deleter:function(t){var e=this;new X.Z.MessageBox("Are you sure?","Are you sure you want to delete "+t.name,X.Z.MessageBox.OKCANCEL,(function(){e.$site.api.post("/api/team/teams/"+e.id+"/delete",{id:t.id}).then((function(t){t.hasError()?e.$site.toast(e,t):e.take(t)})).catch((function(t){e.$site.toast(e,t)}))}))},move:function(t,e){var n=this,i={member:t.memberid,team:null!==e?e.id:0};this.$site.api.post("/api/team/teams/"+this.id+"/move",i).then((function(t){t.hasError()?n.$site.toast(n,t):n.take(t)})).catch((function(t){n.$site.toast(n,t)}))},distribute:function(){var t=this.id;new Bt.i(this.$site,{title:"Team Distributer",vue:Xt,data:function(){return{teamingid:t}},buttons:!1,parent:this})},loadNames:function(){var t=this.id;new Bt.i(this.$site,{title:"Team Name Loader",vue:se,addClass:"cl-teams-editor-dlg",data:function(){return{teamingid:t}},buttons:!1,parent:this})},expandAll:function(){var t,e=le(this.teams);try{for(e.s();!(t=e.n()).done;){var n=t.value;this.open[n.id]=!0}}catch(t){e.e(t)}finally{e.f()}},teamHeading:function(t){if(null===t.name)return"Unassigned";t.name;var e,n="",i=le(t.members);try{for(i.s();!(e=i.n()).done;){var a=e.value;""!==n&&(n+=";"),n+=a.email}}catch(t){i.e(t)}finally{i.f()}return"".concat(t.name,' <a class="cl-email" href="mailto:').concat(n,'">email</a>')},export:function(){var t="data:text/csv;charset=utf-8,";t+="Team,ID,email,name\r\n";var e,n=le(this.teams);try{for(n.s();!(e=n.n()).done;){var i,a=e.value,r=le(a.members);try{for(r.s();!(i=r.n()).done;){var o=i.value;t+=a.name+","+o.user+","+o.email+',"'+o.name+'"\r\n'}}catch(t){r.e(t)}finally{r.f()}}}catch(t){n.e(t)}finally{n.f()}var s=encodeURI(t),l=document.createElement("a");l.setAttribute("href",s),l.setAttribute("download",this.teaming.tag+".csv"),document.body.appendChild(l),l.click()}}};var me=n(86503),de={};de.styleTagTransform=j(),de.setAttributes=x(),de.insert=Z().bind(null,"head"),de.domAPI=M(),de.insertStyleElement=S();$()(me.Z,de);me.Z&&me.Z.locals&&me.Z.locals;const fe=(0,H.Z)(ce,[["render",function(t,e,n,a,r,o){var s=(0,i.up)("cl-menu");return(0,i.wg)(),(0,i.iD)("div",gt,[null!==t.teams?((0,i.wg)(),(0,i.iD)("div",ht,[(0,i._)("table",vt,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.teams,(function(n){return(0,i.wg)(),(0,i.iD)(i.HY,{key:n.id},[(0,i._)("tr",bt,[(0,i._)("th",yt,[null!==n.name?((0,i.wg)(),(0,i.iD)("span",wt,[(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.editer(n)}),["prevent"])},[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/pencil16.png",alt:"Edit",title:"Edit"},null,8,kt)],8,_t),(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.deleter(n)}),["prevent"])},[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/x.png",alt:"Delete",title:"Delete"},null,8,Ct)],8,$t)])):(0,i.kq)("v-if",!0),null===n.name?((0,i.wg)(),(0,i.j4)(s,{key:1,"add-class":"cl-inline"},{default:(0,i.w5)((function(){return[(0,i._)("a",null,[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/menubars.png"},null,8,Mt)]),(0,i._)("ul",null,[(0,i._)("li",null,[(0,i._)("a",{onClick:e[0]||(e[0]=(0,i.iM)((function(t){return o.distribute()}),["prevent"]))},"Distribute")])])]})),_:1})):(0,i.kq)("v-if",!0),(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.toggle(n)}),["prevent"])},[(0,i._)("img",{src:t.$site.root+"/vendor/cl/site/img/"+(!0===t.open[n.id]?"minus.png":"plus.png")},null,8,Zt)],8,At)]),(0,i._)("th",{colspan:"2",innerHTML:o.teamHeading(n)},null,8,Tt),(0,i._)("th",xt,(0,i.zw)(n.members.length),1)]),!0===t.open[n.id]?((0,i.wg)(),(0,i.iD)(i.HY,{key:0},[0===n.members.length?((0,i.wg)(),(0,i.iD)("tr",Dt,St)):(0,i.kq)("v-if",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.members,(function(e){return(0,i.wg)(),(0,i.iD)("tr",null,[(0,i._)("td",Et,[(0,i.Wm)(s,null,{default:(0,i.w5)((function(){return[(0,i._)("a",null,[(0,i._)("img",{src:t.root+"/vendor/cl/site/img/menubars.png"},null,8,jt)]),(0,i._)("ul",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.teams,(function(a){return(0,i.wg)(),(0,i.iD)("li",null,[(0,i._)("a",{onClick:(0,i.iM)((function(t){return o.move(e,a)}),["prevent"])},[(0,i.Uk)((0,i.zw)(null!==a.name?a.name:"Unassigned"),1),n===a?((0,i.wg)(),(0,i.iD)("img",{key:0,src:t.root+"/vendor/cl/site/img/check16.png"},null,8,zt)):(0,i.kq)("v-if",!0)],8,Ut)])})),256))])]})),_:2},1024)]),(0,i._)("td",null,[(0,i._)("a",{href:"mailto:"+e.email},(0,i.zw)(e.user),9,Ht)]),(0,i._)("td",null,(0,i.zw)(e.name),1),It])})),256))],64)):(0,i.kq)("v-if",!0)],64)})),128))]),(0,i._)("p",Nt,[(0,i._)("em",null,(0,i.zw)(o.totals),1)])])):(0,i.kq)("v-if",!0)])}]]);var pe=function(){};pe.setup=function(t){t.tables.add({title:"Teams",order:35,api:"/api/team/tables"});t.components.addOption({atLeast:O.N.TA,page:{title:"Main",route:"",order:1},section:{title:"Course",order:5},title:"Teams",order:10,route:"/teams",routes:[{route:"/teams",component:pt}]}),t.components.addRoutes([{route:"/team/:id",component:fe,props:!0}])},Site.Team||(Site.Team=B.create(Site),void 0!==Site.Console&&pe.setup(Site.Console))},75890:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(28742),a=n.n(i),r=n(75336),o=n.n(r)()(a());o.push([t.id,".cl-inline-padded[data-v-33225ecc]{display:inline-block;padding:1.5em 0 2em 0}",""]);const s=o},83896:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(28742),a=n.n(i),r=n(75336),o=n.n(r)()(a());o.push([t.id,"textarea[data-v-30029082]{width:100%}form>p[data-v-30029082]{padding-left:10px;padding-right:10px}",""]);const s=o},59446:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(28742),a=n.n(i),r=n(75336),o=n.n(r)()(a());o.push([t.id,"div.cl-teaming-editor{text-align:center}div.cl-teaming-editor>div{display:inline-block;padding:1.5em 0 2em 0}",""]);const s=o},86503:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(28742),a=n.n(i),r=n(75336),o=n.n(r)()(a());o.push([t.id,"div.cl-teams-editor th:nth-child(2){min-width:30em}div.cl-teams-editor td:nth-child(2){min-width:5em}div.cl-teams-editor td:nth-child(3){min-width:10em}div.cl-teams-editor a.cl-email{float:right;font-weight:normal;font-size:.85em;display:inline-block;padding-right:1em;font-style:italic}div.cl-teams-editor-dlg{min-height:400px}",""]);const s=o},1916:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(28742),a=n.n(i),r=n(75336),o=n.n(r)()(a());o.push([t.id,"h3[data-v-29f1a3d2]{padding-left:.25em;text-align:center}div.cl-team-member[data-v-29f1a3d2]{padding:.1em .5em .5em .5em;background:#bfb;margin-bottom:1em;border:1px solid #000}div.cl-teamrater-item[data-v-29f1a3d2]{margin:.5em 0;padding:0 .5em 1em .5em}div.cl-teamrater-missing[data-v-29f1a3d2]{border:1px solid red}p.cl-teamrater-radio[data-v-29f1a3d2]{margin:0 3em .3em 3em;position:relative}p.cl-teamrater-radio input[data-v-29f1a3d2]{position:absolute;left:-1.5em;top:.25em}textarea.cl-team-comment[data-v-29f1a3d2]{width:100%;height:6em}input[type=submit][data-v-29f1a3d2]{font-size:1.5em}",""]);const s=o},46149:(t,e,n)=>{n.d(e,{Z:()=>i});const i={methods:{close:function(){this.$dialog.close()}}}}},t=>{t.O(0,[736,77,530,592],(()=>{return e=91533,t(t.s=e);var e}));t.O()}]);